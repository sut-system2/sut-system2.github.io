<nav id="sidebar" class="bg-gradient-to-b from-blue-900 to-blue-600 shadow-md h-screen w-64 fixed top-0 left-0 z-50 flex flex-col p-6 transition-all duration-300 -translate-x-64 md:w-64 md:h-screen md:translate-x-0">
  <!-- Toggle Button -->
  <button id="toggleSidebar" class="absolute top-4 right-[-40px] bg-blue-900 text-white px-3 py-1 rounded-md shadow-lg z-50">
    â˜°
  </button>

  <!-- Logo -->
  <!-- <a href="/" class="flex items-center text-white text-2xl font-bold tracking-wide mb-8">
    SUT-SYSTEM2
  </a> -->

  <!-- Navigation Links -->
  <div class="flex flex-col space-y-4 text-white text-lg">
    {% for item in header_context.nav.content %}
    {% set link = get_nav_link(item) %}
    <a href="{{ link }}" class="py-2 px-4 rounded-lg transition-colors duration-300 
      {% if current_url.strip('/') == link.strip('/') %}
        bg-white/20 font-semibold
      {% else %}
        text-gray-200 hover:text-white hover:bg-white/10
      {% endif %}">
      {{ item.text }}
    </a>
    {% endfor %}
  </div>
</nav>

<style>
  @media (max-width: 768px) {
    #sidebar.active {
      width: 100vw;
      height: 100vh;
      transform: translateX(0);
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const sidebar = document.getElementById('sidebar');
    const toggleButton = document.getElementById('toggleSidebar');
    const overlay = document.createElement('div');
    const navLinks = document.querySelectorAll('#sidebar a'); // Select all links in sidebar

    overlay.classList.add('overlay');
    document.body.appendChild(overlay);

    // Toggle sidebar on button click
    toggleButton.addEventListener('click', function () {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    });

    // Close sidebar when clicking outside
    overlay.addEventListener('click', function () {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
    });

    // Close sidebar when clicking a nav link (for anchor links)
    navLinks.forEach(link => {
        link.addEventListener('click', function () {
            if (this.getAttribute('href').startsWith('/#')) {
                // It's an anchor link, close the sidebar
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            }
        });
    });
});
</script>